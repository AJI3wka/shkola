!function(l){var a={type:"html",content:"",url:"",ajax:{},ajax_request:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="arcticmodal-overlay"></div>',css:{backgroundColor:"#000",opacity:.6}},container:{block:void 0,tpl:'<div class="arcticmodal-container"><table class="arcticmodal-container_i"><tr><td class="arcticmodal-container_i2"></td></tr></table></div>'},wrap:void 0,body:void 0,errors:{tpl:'<div class="arcticmodal-error arcticmodal-close"></div>',autoclose_delay:2e3,ajax_unsuccessful_load:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},beforeOpen:l.noop,afterOpen:l.noop,beforeClose:l.noop,afterClose:l.noop,afterLoading:l.noop,afterLoadingOnShow:l.noop,errorLoading:l.noop},i=0,d=l([]),s={getParentEl:function(e){var o=l(e);return o.data("arcticmodal")?o:(o=l(e).closest(".arcticmodal-container").data("arcticmodalParentEl"))||!1},transition:function(e,o,a,r){switch(r=null==r?l.noop:r,a.type){case"fade":"show"==o?e.fadeIn(a.speed,r):e.fadeOut(a.speed,r);break;case"none":"show"==o?e.show():e.hide(),r()}},prepare_body:function(e,o){l(".arcticmodal-close",e.body).unbind("click.arcticmodal").bind("click.arcticmodal",function(){return o.arcticmodal("close"),!1})},init_el:function(t,e){var c=t.data("arcticmodal");if(!c){if(i++,(c=e).modalID=i,c.overlay.block=l(c.overlay.tpl),c.overlay.block.css(c.overlay.css),c.container.block=l(c.container.tpl),c.body=l(".arcticmodal-container_i2",c.container.block),e.clone?c.body.html(t.clone(!0)):(t.before('<div id="arcticmodalReserve'+c.modalID+'" style="display: none" />'),c.body.html(t)),s.prepare_body(c,t),c.closeOnOverlayClick&&c.overlay.block.add(c.container.block).click(function(e){var o,a,r;o=l(">*",c.body),a=e,r=!0,l(o).each(function(){l(a.target).get(0)==l(this).get(0)&&(r=!1),0==l(a.target).closest("HTML",l(this).get(0)).length&&(r=!1)}),r&&t.arcticmodal("close")}),c.container.block.data("arcticmodalParentEl",t),t.data("arcticmodal",c),d=l.merge(d,t),l.proxy(f.show,t)(),"html"==c.type)return t;if(null!=c.ajax.beforeSend){var o=c.ajax.beforeSend;delete c.ajax.beforeSend}if(null!=c.ajax.success){var a=c.ajax.success;delete c.ajax.success}if(null!=c.ajax.error){var r=c.ajax.error;delete c.ajax.error}var n=l.extend(!0,{url:c.url,beforeSend:function(){null==o?c.body.html('<div class="arcticmodal-loading" />'):o(c,t)},success:function(e){t.trigger("afterLoading"),c.afterLoading(c,t,e),null==a?c.body.html(e):a(c,t,e),s.prepare_body(c,t),t.trigger("afterLoadingOnShow"),c.afterLoadingOnShow(c,t,e)},error:function(){t.trigger("errorLoading"),c.errorLoading(c,t),null==r?(c.body.html(c.errors.tpl),l(".arcticmodal-error",c.body).html(c.errors.ajax_unsuccessful_load),l(".arcticmodal-close",c.body).click(function(){return t.arcticmodal("close"),!1}),c.errors.autoclose_delay&&setTimeout(function(){t.arcticmodal("close")},c.errors.autoclose_delay)):r(c,t)}},c.ajax);c.ajax_request=l.ajax(n),t.data("arcticmodal",c)}},init:function(e){if(e=l.extend(!0,{},a,e),!l.isFunction(this))return this.each(function(){s.init_el(l(this),l.extend(!0,{},e))});if(null!=e)if(""!=e.type)switch(e.type){case"html":if(""==e.content)return void l.error('jquery.arcticmodal: Don\'t set parameter "content"');var o=e.content;return e.content="",s.init_el(l(o),e);case"ajax":return""==e.url?void l.error('jquery.arcticmodal: Don\'t set parameter "url"'):s.init_el(l("<div />"),e)}else l.error('jquery.arcticmodal: Don\'t set parameter "type"');else l.error("jquery.arcticmodal: Uncorrect parameters")}},f={show:function(){var e=s.getParentEl(this);if(!1!==e){var o=e.data("arcticmodal");return o.overlay.block.hide(),o.container.block.hide(),l("BODY").append(o.overlay.block),l("BODY").append(o.container.block),o.beforeOpen(o,e),e.trigger("beforeOpen"),"hidden"!=o.wrap.css("overflow")&&(o.wrap.data("arcticmodalOverflow",o.wrap.css("overflow")),o.wrap.outerWidth(!0),o.wrap.outerWidth(!0)),d.not(e).each(function(){l(this).data("arcticmodal").overlay.block.hide()}),s.transition(o.overlay.block,"show",1<d.length?{type:"none"}:o.openEffect),s.transition(o.container.block,"show",1<d.length?{type:"none"}:o.openEffect,function(){o.afterOpen(o,e),e.trigger("afterOpen")}),e}l.error("jquery.arcticmodal: Uncorrect call")},close:function(){if(!l.isFunction(this))return this.each(function(){var e=s.getParentEl(this);if(!1!==e){var o=e.data("arcticmodal");!1!==o.beforeClose(o,e)&&(e.trigger("beforeClose"),d.not(e).last().each(function(){l(this).data("arcticmodal").overlay.block.show()}),s.transition(o.overlay.block,"hide",1<d.length?{type:"none"}:o.closeEffect),s.transition(o.container.block,"hide",1<d.length?{type:"none"}:o.closeEffect,function(){o.afterClose(o,e),e.trigger("afterClose"),o.clone||l("#arcticmodalReserve"+o.modalID).replaceWith(o.body.find(">*")),o.overlay.block.remove(),o.container.block.remove(),e.data("arcticmodal",null),l(".arcticmodal-container").length||(o.wrap.data("arcticmodalOverflow")&&o.wrap.css("overflow",o.wrap.data("arcticmodalOverflow")),o.wrap.css("marginRight",0))}),"ajax"==o.type&&o.ajax_request.abort(),d=d.not(e))}else l.error("jquery.arcticmodal: Uncorrect call")});d.each(function(){l(this).arcticmodal("close")})},setDefault:function(e){l.extend(!0,a,e)}};l(function(){a.wrap=l(document.all&&!document.querySelector?"html":"body")}),l(document).bind("keyup.arcticmodal",function(e){var o=d.last();o.length&&o.data("arcticmodal").closeOnEsc&&27===e.keyCode&&o.arcticmodal("close")}),l.arcticmodal=l.fn.arcticmodal=function(e){return f[e]?f[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void l.error("jquery.arcticmodal: Method "+e+" does not exist"):s.init.apply(this,arguments)}}(jQuery);